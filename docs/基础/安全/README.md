# 安全

## XSS

跨站脚本攻击：Cross site scription

### 存储型

1. 恶意用户提交恶意内容到服务器，服务器没识别然后保存了恶意内容到数据库。

2. 正常用户访问数据库，服务器将恶意内容返回到页面（例如留言、评论），用户访问页面时候（会执行了JS脚本）受到XSS攻击

### 反射型

1. 恶意用户分享正常网站的链接，链接中带有恶意内容

2. 用户点击了链接，读取了内容，放到页面中

### DOM型

1. 通过任何方式，向服务器注入DOM元素，影响服务器DOM结构

### 预防



## CSRF

跨站请求伪造：把正常用户作为媒介，模拟正常用户操作，攻击登陆过的站点


### 预防

**1. 设置 `cookie` 的 `sameSite` 设置为 `strict` （恶意网站会报403）**

- 其他取值

  - strict: 严格，所有跨站请求都不附带 `cookie`，用户体验可能会有影响（比如返回已经登录过的网站，也要重新登录）

  - lax: 宽松，所有跨站请求的超链接、`get` 请求的表单、预加载时的连接会发送 `cookie`，其他情况不会发送

  - none: 无限制

**2. 验证 referer 和 origin**

  - 页面中的二次请求都会附带 `referer` 和 `origin` 请求头，告知服务器来自哪个源，服务器可以通过这个请求头验证

  - 某些浏览器 `referer` 可以被用户禁用

**3. 使用JWT等，将身份信息放在自定义请求头内**

**4. 验证码/二次验证（敏感操作要验证码/二次验证，但是用户体验比较差）**
